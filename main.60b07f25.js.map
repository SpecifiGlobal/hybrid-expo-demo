{"version":3,"sources":["node_modules/string-natural-compare/natural-compare.js","node_modules/list.js/src/utils/get-by-class.js","node_modules/list.js/src/utils/extend.js","node_modules/list.js/src/utils/index-of.js","node_modules/list.js/src/utils/to-array.js","node_modules/list.js/src/utils/events.js","node_modules/list.js/src/utils/to-string.js","node_modules/list.js/src/utils/classes.js","node_modules/list.js/src/utils/get-attribute.js","node_modules/list.js/src/item.js","node_modules/list.js/src/add-async.js","node_modules/list.js/src/pagination.js","node_modules/list.js/src/parse.js","node_modules/list.js/src/templater.js","node_modules/list.js/src/search.js","node_modules/list.js/src/filter.js","node_modules/list.js/src/sort.js","node_modules/list.js/src/utils/fuzzy.js","node_modules/list.js/src/fuzzy-search.js","node_modules/list.js/src/index.js","node_modules/desandro-classie/classie.js","js/main.js"],"names":["getElementsByClassName","container","className","single","querySelector","querySelectorAll","polyfill","classElements","tag","els","getElementsByTagName","elsLen","length","pattern","RegExp","i","j","test","module","exports","options","document","extend","object","args","Array","prototype","slice","call","arguments","source","property","indexOf","arr","obj","toArray","collection","window","isArray","Function","Object","hasOwnProperty","push","toString","bind","addEventListener","unbind","removeEventListener","prefix","require","el","type","fn","capture","s","undefined","index","re","ClassList","nodeType","Error","list","classList","add","name","array","join","remove","splice","toggle","force","has","getAttribute","str","replace","split","shift","contains","attr","result","attrs","attributes","nodeName","nodeValue","initValues","element","notCreate","item","_values","found","filtered","init","values","elm","templater","get","newValues","set","show","hide","matching","searched","visible","parentNode","addAsync","callback","items","valuesToAdd","concat","setTimeout","update","classes","events","List","refresh","pagingList","l","matchingItems","page","pages","Math","ceil","currentPage","innerWindow","left","outerWindow","right","clear","is","number","dotted","addEvent","size","currentPageItem","dottedLeft","dottedRight","listContainer","id","listClass","paginationClass","valueNames","searchClass","sortClass","on","Item","getChildren","parent","nodes","childNodes","il","data","parse","itemElements","parseAsync","itemsToIndex","trigger","handlers","parseComplete","indexAsync","Templater","itemSource","getItemSource","clearSourceItem","jl","setAttribute","utils","getByClass","innerHTML","cloneNode","exec","tbody","createElement","firstChild","div","getElementById","create","getValueName","setValue","value","valueName","v","newItem","removeAttribute","removeChild","appendChild","hasChildNodes","text","columns","searchString","customSearch","prepare","resetList","setOptions","setColumns","searchColumns","setSearchString","toLowerCase","tmpColumn","search","k","kl","column","reset","searchMethod","visibleItems","searchStart","searchComplete","e","target","srcElement","alreadyCleared","filterStart","filterComplete","filterFunction","filter","buttons","getOrder","btn","predefinedOrder","getInSensitive","insensitive","setOrder","order","sort","currentTarget","customSortFunction","sortFunction","multi","itemA","itemB","naturalSort","alphabet","caseInsensitive","sortStart","sortComplete","Match_Location","location","Match_Distance","distance","Match_Threshold","threshold","loc","q","charAt","match_bitapScore_","x","accuracy","proximity","abs","score_threshold","best_loc","min","lastIndexOf","matchmask","bin_min","bin_mid","bin_max","last_rd","d","floor","start","max","finish","rd","charMatch","score","fuzzy","multiSearch","fuzzySearch","searchArguments","foundArgument","searchArgument","self","initPagination","pagination","handler","reIndex","toJSON","json","added","matchedItems","event","off","classie","styles","getComputedStyle","documentElement","pre","match","OLink","dom","lowercase","css","js","toUpperCase","substr","support","transitions","Modernizr","csstransitions","transEndEventNames","transEndEventName","prefixed","onEndTransition","propTest","onEndCallbackFn","ev","propertyName","mall","mallLevelsEl","mallLevels","mallLevelsTotal","mallSurroundings","selectedLevel","mallNav","allLevelsCtrl","levelUpCtrl","levelDownCtrl","pins","contentEl","contentCloseCtrl","isOpenContentArea","isNavigating","isExpanded","spacesListEl","spacesEl","spaces","spaceref","sortByNameCtrl","spacesList","searchBox","openSearchCtrl","closeSearchCtrl","initEvents","forEach","level","pos","showLevel","showAllLevels","navigate","label","checkbox","checked","pin","contentItem","preventDefault","openContent","closeContentArea","space","spaceItem","spacerefval","closeSearch","doSearch","openSearch","setNavigationState","levelEl","showPins","hideSurroundings","showMallNav","showLevelSpaces","removePins","showSurroundings","hideMallNav","direction","prevSelectedLevel","currentLevel","nextLevel","hideSpace","showSpace","openContentArea","activeItem","listItem","activeSpaceArea","sliding"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIA,sBAAsB,GAAG,UAASC,SAAT,EAAoBC,SAApB,EAA+BC,MAA/B,EAAuC;AAClE,MAAIA,MAAJ,EAAY;AACV,WAAOF,SAAS,CAACD,sBAAV,CAAiCE,SAAjC,EAA4C,CAA5C,CAAP;AACD,GAFD,MAEO;AACL,WAAOD,SAAS,CAACD,sBAAV,CAAiCE,SAAjC,CAAP;AACD;AACF,CAND;;AAQA,IAAIE,aAAa,GAAG,UAASH,SAAT,EAAoBC,SAApB,EAA+BC,MAA/B,EAAuC;AACzDD,EAAAA,SAAS,GAAG,MAAMA,SAAlB;;AACA,MAAIC,MAAJ,EAAY;AACV,WAAOF,SAAS,CAACG,aAAV,CAAwBF,SAAxB,CAAP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B;AACAiH,QAAAA,EAAE,CAACjH,CAAD,CAAF,CAAMoF,IAAN;AACD,OAHM,MAGA;AACL6B,QAAAA,EAAE,CAACjH,CAAD,CAAF,CAAMoF,IAAN;AACD;AACF;;AACD6K,IAAAA,IAAI,CAACrH,OAAL,CAAa,SAAb;AACA,WAAOqH,IAAP;AACD,GArBD;;AAuBArL,EAAAA,IAAI,CAACyK,KAAL;AACD,CA3PD;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA/N,MAAM,CAAC4E,IAAP,GAAchE,OAAO,CAAC,SAAD,CAArB;AACAZ,MAAM,CAACsP,OAAP,GAAiB1O,OAAO,CAAC,6BAAD,CAAxB;;AAEC,CAAC,UAASZ,MAAT,EAAiB;AAElB,eAFkB,CAIlB;AACA;;AACA,MAAIW,MAAM,GAAI,YAAY;AACzB,QAAI4O,MAAM,GAAGvP,MAAM,CAACwP,gBAAP,CAAwBxQ,QAAQ,CAACyQ,eAAjC,EAAkD,EAAlD,CAAb;AAAA,QACCC,GAAG,GAAG,CAACtQ,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BgQ,MAA3B,EAAmC1N,IAAnC,CAAwC,EAAxC,EAA4C8N,KAA5C,CAAkD,mBAAlD,KAA2EJ,MAAM,CAACK,KAAP,KAAiB,EAAjB,IAAuB,CAAC,EAAD,EAAK,GAAL,CAAnG,EAA+G,CAA/G,CADP;AAAA,QAECC,GAAG,GAAI,iBAAD,CAAoBF,KAApB,CAA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","file":"main.60b07f25.js","sourceRoot":"..","sourcesContent":["'use strict';\n\nvar alphabet;\nvar alphabetIndexMap;\nvar alphabetIndexMapLength = 0;\n\nfunction isNumberCode(code) {\n  return code >= 48 && code <= 57;\n}\n\nfunction naturalCompare(a, b) {\n  var lengthA = (a += '').length;\n  var lengthB = (b += '').length;\n  var aIndex = 0;\n  var bIndex = 0;\n\n  while (aIndex < lengthA && bIndex < lengthB) {\n    var charCodeA = a.charCodeAt(aIndex);\n    var charCodeB = b.charCodeAt(bIndex);\n\n    if (isNumberCode(charCodeA)) {\n      if (!isNumberCode(charCodeB)) {\n        return charCodeA - charCodeB;\n      }\n\n      var numStartA = aIndex;\n      var numStartB = bIndex;\n\n      while (charCodeA === 48 && ++numStartA < lengthA) {\n        charCodeA = a.charCodeAt(numStartA);\n      }\n      while (charCodeB === 48 && ++numStartB < lengthB) {\n        charCodeB = b.charCodeAt(numStartB);\n      }\n\n      var numEndA = numStartA;\n      var numEndB = numStartB;\n\n      while (numEndA < lengthA && isNumberCode(a.charCodeAt(numEndA))) {\n        ++numEndA;\n      }\n      while (numEndB < lengthB && isNumberCode(b.charCodeAt(numEndB))) {\n        ++numEndB;\n      }\n\n      var difference = numEndA - numStartA - numEndB + numStartB; // numA length - numB length\n      if (difference) {\n        return difference;\n      }\n\n      while (numStartA < numEndA) {\n        difference = a.charCodeAt(numStartA++) - b.charCodeAt(numStartB++);\n        if (difference) {\n          return difference;\n        }\n      }\n\n      aIndex = numEndA;\n      bIndex = numEndB;\n      continue;\n    }\n\n    if (charCodeA !== charCodeB) {\n      if (\n        charCodeA < alphabetIndexMapLength &&\n        charCodeB < alphabetIndexMapLength &&\n        alphabetIndexMap[charCodeA] !== -1 &&\n        alphabetIndexMap[charCodeB] !== -1\n      ) {\n        return alphabetIndexMap[charCodeA] - alphabetIndexMap[charCodeB];\n      }\n\n      return charCodeA - charCodeB;\n    }\n\n    ++aIndex;\n    ++bIndex;\n  }\n\n  if (aIndex >= lengthA && bIndex < lengthB && lengthA >= lengthB) {\n    return -1;\n  }\n\n  if (bIndex >= lengthB && aIndex < lengthA && lengthB >= lengthA) {\n    return 1;\n  }\n\n  return lengthA - lengthB;\n}\n\nnaturalCompare.caseInsensitive = naturalCompare.i = function(a, b) {\n  return naturalCompare(('' + a).toLowerCase(), ('' + b).toLowerCase());\n};\n\nObject.defineProperties(naturalCompare, {\n  alphabet: {\n    get: function() {\n      return alphabet;\n    },\n\n    set: function(value) {\n      alphabet = value;\n      alphabetIndexMap = [];\n\n      var i = 0;\n\n      if (alphabet) {\n        for (; i < alphabet.length; i++) {\n          alphabetIndexMap[alphabet.charCodeAt(i)] = i;\n        }\n      }\n\n      alphabetIndexMapLength = alphabetIndexMap.length;\n\n      for (i = 0; i < alphabetIndexMapLength; i++) {\n        if (alphabetIndexMap[i] === undefined) {\n          alphabetIndexMap[i] = -1;\n        }\n      }\n    },\n  },\n});\n\nmodule.exports = naturalCompare;\n","/**\n * A cross-browser implementation of getElementsByClass.\n * Heavily based on Dustin Diaz's function: http://dustindiaz.com/getelementsbyclass.\n *\n * Find all elements with class `className` inside `container`.\n * Use `single = true` to increase performance in older browsers\n * when only one element is needed.\n *\n * @param {String} className\n * @param {Element} container\n * @param {Boolean} single\n * @api public\n */\n\nvar getElementsByClassName = function(container, className, single) {\n  if (single) {\n    return container.getElementsByClassName(className)[0];\n  } else {\n    return container.getElementsByClassName(className);\n  }\n};\n\nvar querySelector = function(container, className, single) {\n  className = '.' + className;\n  if (single) {\n    return container.querySelector(className);\n  } else {\n    return container.querySelectorAll(className);\n  }\n};\n\nvar polyfill = function(container, className, single) {\n  var classElements = [],\n    tag = '*';\n\n  var els = container.getElementsByTagName(tag);\n  var elsLen = els.length;\n  var pattern = new RegExp(\"(^|\\\\s)\"+className+\"(\\\\s|$)\");\n  for (var i = 0, j = 0; i < elsLen; i++) {\n    if ( pattern.test(els[i].className) ) {\n      if (single) {\n        return els[i];\n      } else {\n        classElements[j] = els[i];\n        j++;\n      }\n    }\n  }\n  return classElements;\n};\n\nmodule.exports = (function() {\n  return function(container, className, single, options) {\n    options = options || {};\n    if ((options.test && options.getElementsByClassName) || (!options.test && document.getElementsByClassName)) {\n      return getElementsByClassName(container, className, single);\n    } else if ((options.test && options.querySelector) || (!options.test && document.querySelector)) {\n      return querySelector(container, className, single);\n    } else {\n      return polyfill(container, className, single);\n    }\n  };\n})();\n","/*\n * Source: https://github.com/segmentio/extend\n */\n\nmodule.exports = function extend (object) {\n    // Takes an unlimited number of extenders.\n    var args = Array.prototype.slice.call(arguments, 1);\n\n    // For each extender, copy their properties on our object.\n    for (var i = 0, source; source = args[i]; i++) {\n        if (!source) continue;\n        for (var property in source) {\n            object[property] = source[property];\n        }\n    }\n\n    return object;\n};\n","var indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};\n","/**\n * Source: https://github.com/timoxley/to-array\n *\n * Convert an array-like object into an `Array`.\n * If `collection` is already an `Array`, then will return a clone of `collection`.\n *\n * @param {Array | Mixed} collection An `Array` or array-like object to convert e.g. `arguments` or `NodeList`\n * @return {Array} Naive conversion of `collection` to a new `Array`.\n * @api public\n */\n\nmodule.exports = function toArray(collection) {\n  if (typeof collection === 'undefined') return [];\n  if (collection === null) return [null];\n  if (collection === window) return [window];\n  if (typeof collection === 'string') return [collection];\n  if (isArray(collection)) return collection;\n  if (typeof collection.length != 'number') return [collection];\n  if (typeof collection === 'function' && collection instanceof Function) return [collection];\n\n  var arr = [];\n  for (var i = 0; i < collection.length; i++) {\n    if (Object.prototype.hasOwnProperty.call(collection, i) || i in collection) {\n      arr.push(collection[i]);\n    }\n  }\n  if (!arr.length) return [];\n  return arr;\n};\n\nfunction isArray(arr) {\n  return Object.prototype.toString.call(arr) === \"[object Array]\";\n}\n","var bind = window.addEventListener ? 'addEventListener' : 'attachEvent',\n    unbind = window.removeEventListener ? 'removeEventListener' : 'detachEvent',\n    prefix = bind !== 'addEventListener' ? 'on' : '',\n    toArray = require('./to-array');\n\n/**\n * Bind `el` event `type` to `fn`.\n *\n * @param {Element} el, NodeList, HTMLCollection or Array\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\n\nexports.bind = function(el, type, fn, capture){\n  el = toArray(el);\n  for ( var i = 0; i < el.length; i++ ) {\n    el[i][bind](prefix + type, fn, capture || false);\n  }\n};\n\n/**\n * Unbind `el` event `type`'s callback `fn`.\n *\n * @param {Element} el, NodeList, HTMLCollection or Array\n * @param {String} type\n * @param {Function} fn\n * @param {Boolean} capture\n * @api public\n */\n\nexports.unbind = function(el, type, fn, capture){\n  el = toArray(el);\n  for ( var i = 0; i < el.length; i++ ) {\n    el[i][unbind](prefix + type, fn, capture || false);\n  }\n};\n","module.exports = function(s) {\n  s = (s === undefined) ? \"\" : s;\n  s = (s === null) ? \"\" : s;\n  s = s.toString();\n  return s;\n};\n","/**\n * Module dependencies.\n */\n\nvar index = require('./index-of');\n\n/**\n * Whitespace regexp.\n */\n\nvar re = /\\s+/;\n\n/**\n * toString reference.\n */\n\nvar toString = Object.prototype.toString;\n\n/**\n * Wrap `el` in a `ClassList`.\n *\n * @param {Element} el\n * @return {ClassList}\n * @api public\n */\n\nmodule.exports = function(el){\n  return new ClassList(el);\n};\n\n/**\n * Initialize a new ClassList for `el`.\n *\n * @param {Element} el\n * @api private\n */\n\nfunction ClassList(el) {\n  if (!el || !el.nodeType) {\n    throw new Error('A DOM element reference is required');\n  }\n  this.el = el;\n  this.list = el.classList;\n}\n\n/**\n * Add class `name` if not already present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.add = function(name){\n  // classList\n  if (this.list) {\n    this.list.add(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (!~i) arr.push(name);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n/**\n * Remove class `name` when present, or\n * pass a regular expression to remove\n * any which match.\n *\n * @param {String|RegExp} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.remove = function(name){\n  // classList\n  if (this.list) {\n    this.list.remove(name);\n    return this;\n  }\n\n  // fallback\n  var arr = this.array();\n  var i = index(arr, name);\n  if (~i) arr.splice(i, 1);\n  this.el.className = arr.join(' ');\n  return this;\n};\n\n\n/**\n * Toggle class `name`, can force state via `force`.\n *\n * For browsers that support classList, but do not support `force` yet,\n * the mistake will be detected and corrected.\n *\n * @param {String} name\n * @param {Boolean} force\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.toggle = function(name, force){\n  // classList\n  if (this.list) {\n    if (\"undefined\" !== typeof force) {\n      if (force !== this.list.toggle(name, force)) {\n        this.list.toggle(name); // toggle again to correct\n      }\n    } else {\n      this.list.toggle(name);\n    }\n    return this;\n  }\n\n  // fallback\n  if (\"undefined\" !== typeof force) {\n    if (!force) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  } else {\n    if (this.has(name)) {\n      this.remove(name);\n    } else {\n      this.add(name);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return an array of classes.\n *\n * @return {Array}\n * @api public\n */\n\nClassList.prototype.array = function(){\n  var className = this.el.getAttribute('class') || '';\n  var str = className.replace(/^\\s+|\\s+$/g, '');\n  var arr = str.split(re);\n  if ('' === arr[0]) arr.shift();\n  return arr;\n};\n\n/**\n * Check if class `name` is present.\n *\n * @param {String} name\n * @return {ClassList}\n * @api public\n */\n\nClassList.prototype.has =\nClassList.prototype.contains = function(name){\n  return this.list ? this.list.contains(name) : !! ~index(this.array(), name);\n};\n","/**\n * A cross-browser implementation of getAttribute.\n * Source found here: http://stackoverflow.com/a/3755343/361337 written by Vivin Paliath\n *\n * Return the value for `attr` at `element`.\n *\n * @param {Element} el\n * @param {String} attr\n * @api public\n */\n\nmodule.exports = function(el, attr) {\n  var result = (el.getAttribute && el.getAttribute(attr)) || null;\n  if( !result ) {\n    var attrs = el.attributes;\n    var length = attrs.length;\n    for(var i = 0; i < length; i++) {\n      if (attr[i] !== undefined) {\n        if(attr[i].nodeName === attr) {\n          result = attr[i].nodeValue;\n        }\n      }\n    }\n  }\n  return result;\n};\n","module.exports = function(list) {\n  return function(initValues, element, notCreate) {\n    var item = this;\n\n    this._values = {};\n\n    this.found = false; // Show if list.searched == true and this.found == true\n    this.filtered = false;// Show if list.filtered == true and this.filtered == true\n\n    var init = function(initValues, element, notCreate) {\n      if (element === undefined) {\n        if (notCreate) {\n          item.values(initValues, notCreate);\n        } else {\n          item.values(initValues);\n        }\n      } else {\n        item.elm = element;\n        var values = list.templater.get(item, initValues);\n        item.values(values);\n      }\n    };\n\n    this.values = function(newValues, notCreate) {\n      if (newValues !== undefined) {\n        for(var name in newValues) {\n          item._values[name] = newValues[name];\n        }\n        if (notCreate !== true) {\n          list.templater.set(item, item.values());\n        }\n      } else {\n        return item._values;\n      }\n    };\n\n    this.show = function() {\n      list.templater.show(item);\n    };\n\n    this.hide = function() {\n      list.templater.hide(item);\n    };\n\n    this.matching = function() {\n      return (\n        (list.filtered && list.searched && item.found && item.filtered) ||\n        (list.filtered && !list.searched && item.filtered) ||\n        (!list.filtered && list.searched && item.found) ||\n        (!list.filtered && !list.searched)\n      );\n    };\n\n    this.visible = function() {\n      return (item.elm && (item.elm.parentNode == list.list)) ? true : false;\n    };\n\n    init(initValues, element, notCreate);\n  };\n};\n","module.exports = function(list) {\n  var addAsync = function(values, callback, items) {\n    var valuesToAdd = values.splice(0, 50);\n    items = items || [];\n    items = items.concat(list.add(valuesToAdd));\n    if (values.length > 0) {\n      setTimeout(function() {\n        addAsync(values, callback, items);\n      }, 1);\n    } else {\n      list.update();\n      callback(items);\n    }\n  };\n  return addAsync;\n};\n","var classes = require('./utils/classes'),\n  events = require('./utils/events'),\n  List = require('./index');\n\nmodule.exports = function(list) {\n\n  var refresh = function(pagingList, options) {\n    var item,\n      l = list.matchingItems.length,\n      index = list.i,\n      page = list.page,\n      pages = Math.ceil(l / page),\n      currentPage = Math.ceil((index / page)),\n      innerWindow = options.innerWindow || 2,\n      left = options.left || options.outerWindow || 0,\n      right = options.right || options.outerWindow || 0;\n\n    right = pages - right;\n\n    pagingList.clear();\n    for (var i = 1; i <= pages; i++) {\n      var className = (currentPage === i) ? \"active\" : \"\";\n\n      //console.log(i, left, right, currentPage, (currentPage - innerWindow), (currentPage + innerWindow), className);\n\n      if (is.number(i, left, right, currentPage, innerWindow)) {\n        item = pagingList.add({\n          page: i,\n          dotted: false\n        })[0];\n        if (className) {\n          classes(item.elm).add(className);\n        }\n        addEvent(item.elm, i, page);\n      } else if (is.dotted(pagingList, i, left, right, currentPage, innerWindow, pagingList.size())) {\n        item = pagingList.add({\n          page: \"...\",\n          dotted: true\n        })[0];\n        classes(item.elm).add(\"disabled\");\n      }\n    }\n  };\n\n  var is = {\n    number: function(i, left, right, currentPage, innerWindow) {\n       return this.left(i, left) || this.right(i, right) || this.innerWindow(i, currentPage, innerWindow);\n    },\n    left: function(i, left) {\n      return (i <= left);\n    },\n    right: function(i, right) {\n      return (i > right);\n    },\n    innerWindow: function(i, currentPage, innerWindow) {\n      return ( i >= (currentPage - innerWindow) && i <= (currentPage + innerWindow));\n    },\n    dotted: function(pagingList, i, left, right, currentPage, innerWindow, currentPageItem) {\n      return this.dottedLeft(pagingList, i, left, right, currentPage, innerWindow) || (this.dottedRight(pagingList, i, left, right, currentPage, innerWindow, currentPageItem));\n    },\n    dottedLeft: function(pagingList, i, left, right, currentPage, innerWindow) {\n      return ((i == (left + 1)) && !this.innerWindow(i, currentPage, innerWindow) && !this.right(i, right));\n    },\n    dottedRight: function(pagingList, i, left, right, currentPage, innerWindow, currentPageItem) {\n      if (pagingList.items[currentPageItem-1].values().dotted) {\n        return false;\n      } else {\n        return ((i == (right)) && !this.innerWindow(i, currentPage, innerWindow) && !this.right(i, right));\n      }\n    }\n  };\n\n  var addEvent = function(elm, i, page) {\n     events.bind(elm, 'click', function() {\n       list.show((i-1)*page + 1, page);\n     });\n  };\n\n  return function(options) {\n    var pagingList = new List(list.listContainer.id, {\n      listClass: options.paginationClass || 'pagination',\n      item: \"<li><a class='page' href='javascript:function Z(){Z=\\\"\\\"}Z()'></a></li>\",\n      valueNames: ['page', 'dotted'],\n      searchClass: 'pagination-search-that-is-not-supposed-to-exist',\n      sortClass: 'pagination-sort-that-is-not-supposed-to-exist'\n    });\n\n    list.on('updated', function() {\n      refresh(pagingList, options);\n    });\n    refresh(pagingList, options);\n  };\n};\n","module.exports = function(list) {\n\n  var Item = require('./item')(list);\n\n  var getChildren = function(parent) {\n    var nodes = parent.childNodes,\n      items = [];\n    for (var i = 0, il = nodes.length; i < il; i++) {\n      // Only textnodes have a data attribute\n      if (nodes[i].data === undefined) {\n        items.push(nodes[i]);\n      }\n    }\n    return items;\n  };\n\n  var parse = function(itemElements, valueNames) {\n    for (var i = 0, il = itemElements.length; i < il; i++) {\n      list.items.push(new Item(valueNames, itemElements[i]));\n    }\n  };\n  var parseAsync = function(itemElements, valueNames) {\n    var itemsToIndex = itemElements.splice(0, 50); // TODO: If < 100 items, what happens in IE etc?\n    parse(itemsToIndex, valueNames);\n    if (itemElements.length > 0) {\n      setTimeout(function() {\n        parseAsync(itemElements, valueNames);\n      }, 1);\n    } else {\n      list.update();\n      list.trigger('parseComplete');\n    }\n  };\n\n  list.handlers.parseComplete = list.handlers.parseComplete || [];\n\n  return function() {\n    var itemsToIndex = getChildren(list.list),\n      valueNames = list.valueNames;\n\n    if (list.indexAsync) {\n      parseAsync(itemsToIndex, valueNames);\n    } else {\n      parse(itemsToIndex, valueNames);\n    }\n  };\n};\n","var Templater = function(list) {\n  var itemSource,\n    templater = this;\n\n  var init = function() {\n    itemSource = templater.getItemSource(list.item);\n    if (itemSource) {\n      itemSource = templater.clearSourceItem(itemSource, list.valueNames);\n    }\n  };\n\n  this.clearSourceItem = function(el, valueNames) {\n    for(var i = 0, il = valueNames.length; i < il; i++) {\n      var elm;\n      if (valueNames[i].data) {\n        for (var j = 0, jl = valueNames[i].data.length; j < jl; j++) {\n          el.setAttribute('data-'+valueNames[i].data[j], '');\n        }\n      } else if (valueNames[i].attr && valueNames[i].name) {\n        elm = list.utils.getByClass(el, valueNames[i].name, true);\n        if (elm) {\n          elm.setAttribute(valueNames[i].attr, \"\");\n        }\n      } else {\n        elm = list.utils.getByClass(el, valueNames[i], true);\n        if (elm) {\n          elm.innerHTML = \"\";\n        }\n      }\n      elm = undefined;\n    }\n    return el;\n  };\n\n  this.getItemSource = function(item) {\n    if (item === undefined) {\n      var nodes = list.list.childNodes,\n        items = [];\n\n      for (var i = 0, il = nodes.length; i < il; i++) {\n        // Only textnodes have a data attribute\n        if (nodes[i].data === undefined) {\n          return nodes[i].cloneNode(true);\n        }\n      }\n    } else if (/<tr[\\s>]/g.exec(item)) {\n      var tbody = document.createElement('tbody');\n      tbody.innerHTML = item;\n      return tbody.firstChild;\n    } else if (item.indexOf(\"<\") !== -1) {\n      var div = document.createElement('div');\n      div.innerHTML = item;\n      return div.firstChild;\n    } else {\n      var source = document.getElementById(list.item);\n      if (source) {\n        return source;\n      }\n    }\n    return undefined;\n  };\n\n  this.get = function(item, valueNames) {\n    templater.create(item);\n    var values = {};\n    for(var i = 0, il = valueNames.length; i < il; i++) {\n      var elm;\n      if (valueNames[i].data) {\n        for (var j = 0, jl = valueNames[i].data.length; j < jl; j++) {\n          values[valueNames[i].data[j]] = list.utils.getAttribute(item.elm, 'data-'+valueNames[i].data[j]);\n        }\n      } else if (valueNames[i].attr && valueNames[i].name) {\n        elm = list.utils.getByClass(item.elm, valueNames[i].name, true);\n        values[valueNames[i].name] = elm ? list.utils.getAttribute(elm, valueNames[i].attr) : \"\";\n      } else {\n        elm = list.utils.getByClass(item.elm, valueNames[i], true);\n        values[valueNames[i]] = elm ? elm.innerHTML : \"\";\n      }\n      elm = undefined;\n    }\n    return values;\n  };\n\n  this.set = function(item, values) {\n    var getValueName = function(name) {\n      for (var i = 0, il = list.valueNames.length; i < il; i++) {\n        if (list.valueNames[i].data) {\n          var data = list.valueNames[i].data;\n          for (var j = 0, jl = data.length; j < jl; j++) {\n            if (data[j] === name) {\n              return { data: name };\n            }\n          }\n        } else if (list.valueNames[i].attr && list.valueNames[i].name && list.valueNames[i].name == name) {\n          return list.valueNames[i];\n        } else if (list.valueNames[i] === name) {\n          return name;\n        }\n      }\n    };\n    var setValue = function(name, value) {\n      var elm;\n      var valueName = getValueName(name);\n      if (!valueName)\n        return;\n      if (valueName.data) {\n        item.elm.setAttribute('data-'+valueName.data, value);\n      } else if (valueName.attr && valueName.name) {\n        elm = list.utils.getByClass(item.elm, valueName.name, true);\n        if (elm) {\n          elm.setAttribute(valueName.attr, value);\n        }\n      } else {\n        elm = list.utils.getByClass(item.elm, valueName, true);\n        if (elm) {\n          elm.innerHTML = value;\n        }\n      }\n      elm = undefined;\n    };\n    if (!templater.create(item)) {\n      for(var v in values) {\n        if (values.hasOwnProperty(v)) {\n          setValue(v, values[v]);\n        }\n      }\n    }\n  };\n\n  this.create = function(item) {\n    if (item.elm !== undefined) {\n      return false;\n    }\n    if (itemSource === undefined) {\n      throw new Error(\"The list need to have at list one item on init otherwise you'll have to add a template.\");\n    }\n    /* If item source does not exists, use the first item in list as\n    source for new items */\n    var newItem = itemSource.cloneNode(true);\n    newItem.removeAttribute('id');\n    item.elm = newItem;\n    templater.set(item, item.values());\n    return true;\n  };\n  this.remove = function(item) {\n    if (item.elm.parentNode === list.list) {\n      list.list.removeChild(item.elm);\n    }\n  };\n  this.show = function(item) {\n    templater.create(item);\n    list.list.appendChild(item.elm);\n  };\n  this.hide = function(item) {\n    if (item.elm !== undefined && item.elm.parentNode === list.list) {\n      list.list.removeChild(item.elm);\n    }\n  };\n  this.clear = function() {\n    /* .innerHTML = ''; fucks up IE */\n    if (list.list.hasChildNodes()) {\n      while (list.list.childNodes.length >= 1)\n      {\n        list.list.removeChild(list.list.firstChild);\n      }\n    }\n  };\n\n  init();\n};\n\nmodule.exports = function(list) {\n  return new Templater(list);\n};\n","module.exports = function(list) {\n  var item,\n    text,\n    columns,\n    searchString,\n    customSearch;\n\n  var prepare = {\n    resetList: function() {\n      list.i = 1;\n      list.templater.clear();\n      customSearch = undefined;\n    },\n    setOptions: function(args) {\n      if (args.length == 2 && args[1] instanceof Array) {\n        columns = args[1];\n      } else if (args.length == 2 && typeof(args[1]) == \"function\") {\n        columns = undefined;\n        customSearch = args[1];\n      } else if (args.length == 3) {\n        columns = args[1];\n        customSearch = args[2];\n      } else {\n        columns = undefined;\n      }\n    },\n    setColumns: function() {\n      if (list.items.length === 0) return;\n      if (columns === undefined) {\n        columns = (list.searchColumns === undefined) ? prepare.toArray(list.items[0].values()) : list.searchColumns;\n      }\n    },\n    setSearchString: function(s) {\n      s = list.utils.toString(s).toLowerCase();\n      s = s.replace(/[-[\\]{}()*+?.,\\\\^$|#]/g, \"\\\\$&\"); // Escape regular expression characters\n      searchString = s;\n    },\n    toArray: function(values) {\n      var tmpColumn = [];\n      for (var name in values) {\n        tmpColumn.push(name);\n      }\n      return tmpColumn;\n    }\n  };\n  var search = {\n    list: function() {\n      for (var k = 0, kl = list.items.length; k < kl; k++) {\n        search.item(list.items[k]);\n      }\n    },\n    item: function(item) {\n      item.found = false;\n      for (var j = 0, jl = columns.length; j < jl; j++) {\n        if (search.values(item.values(), columns[j])) {\n          item.found = true;\n          return;\n        }\n      }\n    },\n    values: function(values, column) {\n      if (values.hasOwnProperty(column)) {\n        text = list.utils.toString(values[column]).toLowerCase();\n        if ((searchString !== \"\") && (text.search(searchString) > -1)) {\n          return true;\n        }\n      }\n      return false;\n    },\n    reset: function() {\n      list.reset.search();\n      list.searched = false;\n    }\n  };\n\n  var searchMethod = function(str) {\n    list.trigger('searchStart');\n\n    prepare.resetList();\n    prepare.setSearchString(str);\n    prepare.setOptions(arguments); // str, cols|searchFunction, searchFunction\n    prepare.setColumns();\n\n    if (searchString === \"\" ) {\n      search.reset();\n    } else {\n      list.searched = true;\n      if (customSearch) {\n        customSearch(searchString, columns);\n      } else {\n        search.list();\n      }\n    }\n\n    list.update();\n    list.trigger('searchComplete');\n    return list.visibleItems;\n  };\n\n  list.handlers.searchStart = list.handlers.searchStart || [];\n  list.handlers.searchComplete = list.handlers.searchComplete || [];\n\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'keyup', function(e) {\n    var target = e.target || e.srcElement, // IE have srcElement\n      alreadyCleared = (target.value === \"\" && !list.searched);\n    if (!alreadyCleared) { // If oninput already have resetted the list, do nothing\n      searchMethod(target.value);\n    }\n  });\n\n  // Used to detect click on HTML5 clear button\n  list.utils.events.bind(list.utils.getByClass(list.listContainer, list.searchClass), 'input', function(e) {\n    var target = e.target || e.srcElement;\n    if (target.value === \"\") {\n      searchMethod('');\n    }\n  });\n\n  return searchMethod;\n};\n","module.exports = function(list) {\n\n  // Add handlers\n  list.handlers.filterStart = list.handlers.filterStart || [];\n  list.handlers.filterComplete = list.handlers.filterComplete || [];\n\n  return function(filterFunction) {\n    list.trigger('filterStart');\n    list.i = 1; // Reset paging\n    list.reset.filter();\n    if (filterFunction === undefined) {\n      list.filtered = false;\n    } else {\n      list.filtered = true;\n      var is = list.items;\n      for (var i = 0, il = is.length; i < il; i++) {\n        var item = is[i];\n        if (filterFunction(item)) {\n          item.filtered = true;\n        } else {\n          item.filtered = false;\n        }\n      }\n    }\n    list.update();\n    list.trigger('filterComplete');\n    return list.visibleItems;\n  };\n};\n","module.exports = function(list) {\n\n  var buttons = {\n    els: undefined,\n    clear: function() {\n      for (var i = 0, il = buttons.els.length; i < il; i++) {\n        list.utils.classes(buttons.els[i]).remove('asc');\n        list.utils.classes(buttons.els[i]).remove('desc');\n      }\n    },\n    getOrder: function(btn) {\n      var predefinedOrder = list.utils.getAttribute(btn, 'data-order');\n      if (predefinedOrder == \"asc\" || predefinedOrder == \"desc\") {\n        return predefinedOrder;\n      } else if (list.utils.classes(btn).has('desc')) {\n        return \"asc\";\n      } else if (list.utils.classes(btn).has('asc')) {\n        return \"desc\";\n      } else {\n        return \"asc\";\n      }\n    },\n    getInSensitive: function(btn, options) {\n      var insensitive = list.utils.getAttribute(btn, 'data-insensitive');\n      if (insensitive === \"false\") {\n        options.insensitive = false;\n      } else {\n        options.insensitive = true;\n      }\n    },\n    setOrder: function(options) {\n      for (var i = 0, il = buttons.els.length; i < il; i++) {\n        var btn = buttons.els[i];\n        if (list.utils.getAttribute(btn, 'data-sort') !== options.valueName) {\n          continue;\n        }\n        var predefinedOrder = list.utils.getAttribute(btn, 'data-order');\n        if (predefinedOrder == \"asc\" || predefinedOrder == \"desc\") {\n          if (predefinedOrder == options.order) {\n            list.utils.classes(btn).add(options.order);\n          }\n        } else {\n          list.utils.classes(btn).add(options.order);\n        }\n      }\n    }\n  };\n\n  var sort = function() {\n    list.trigger('sortStart');\n    var options = {};\n\n    var target = arguments[0].currentTarget || arguments[0].srcElement || undefined;\n\n    if (target) {\n      options.valueName = list.utils.getAttribute(target, 'data-sort');\n      buttons.getInSensitive(target, options);\n      options.order = buttons.getOrder(target);\n    } else {\n      options = arguments[1] || options;\n      options.valueName = arguments[0];\n      options.order = options.order || \"asc\";\n      options.insensitive = (typeof options.insensitive == \"undefined\") ? true : options.insensitive;\n    }\n\n    buttons.clear();\n    buttons.setOrder(options);\n\n\n    // caseInsensitive\n    // alphabet\n    var customSortFunction = (options.sortFunction || list.sortFunction || null),\n        multi = ((options.order === 'desc') ? -1 : 1),\n        sortFunction;\n\n    if (customSortFunction) {\n      sortFunction = function(itemA, itemB) {\n        return customSortFunction(itemA, itemB, options) * multi;\n      };\n    } else {\n      sortFunction = function(itemA, itemB) {\n        var sort = list.utils.naturalSort;\n        sort.alphabet = list.alphabet || options.alphabet || undefined;\n        if (!sort.alphabet && options.insensitive) {\n          sort = list.utils.naturalSort.caseInsensitive;\n        }\n        return sort(itemA.values()[options.valueName], itemB.values()[options.valueName]) * multi;\n      };\n    }\n\n    list.items.sort(sortFunction);\n    list.update();\n    list.trigger('sortComplete');\n  };\n\n  // Add handlers\n  list.handlers.sortStart = list.handlers.sortStart || [];\n  list.handlers.sortComplete = list.handlers.sortComplete || [];\n\n  buttons.els = list.utils.getByClass(list.listContainer, list.sortClass);\n  list.utils.events.bind(buttons.els, 'click', sort);\n  list.on('searchStart', buttons.clear);\n  list.on('filterStart', buttons.clear);\n\n  return sort;\n};\n","module.exports = function(text, pattern, options) {\n    // Aproximately where in the text is the pattern expected to be found?\n    var Match_Location = options.location || 0;\n\n    //Determines how close the match must be to the fuzzy location (specified above). An exact letter match which is 'distance' characters away from the fuzzy location would score as a complete mismatch. A distance of '0' requires the match be at the exact location specified, a threshold of '1000' would require a perfect match to be within 800 characters of the fuzzy location to be found using a 0.8 threshold.\n    var Match_Distance = options.distance || 100;\n\n    // At what point does the match algorithm give up. A threshold of '0.0' requires a perfect match (of both letters and location), a threshold of '1.0' would match anything.\n    var Match_Threshold = options.threshold || 0.4;\n\n    if (pattern === text) return true; // Exact match\n    if (pattern.length > 32) return false; // This algorithm cannot be used\n\n    // Set starting location at beginning text and initialise the alphabet.\n    var loc = Match_Location,\n        s = (function() {\n            var q = {},\n                i;\n\n            for (i = 0; i < pattern.length; i++) {\n                q[pattern.charAt(i)] = 0;\n            }\n\n            for (i = 0; i < pattern.length; i++) {\n                q[pattern.charAt(i)] |= 1 << (pattern.length - i - 1);\n            }\n\n            return q;\n        }());\n\n    // Compute and return the score for a match with e errors and x location.\n    // Accesses loc and pattern through being a closure.\n\n    function match_bitapScore_(e, x) {\n        var accuracy = e / pattern.length,\n            proximity = Math.abs(loc - x);\n\n        if (!Match_Distance) {\n            // Dodge divide by zero error.\n            return proximity ? 1.0 : accuracy;\n        }\n        return accuracy + (proximity / Match_Distance);\n    }\n\n    var score_threshold = Match_Threshold, // Highest score beyond which we give up.\n        best_loc = text.indexOf(pattern, loc); // Is there a nearby exact match? (speedup)\n\n    if (best_loc != -1) {\n        score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n        // What about in the other direction? (speedup)\n        best_loc = text.lastIndexOf(pattern, loc + pattern.length);\n\n        if (best_loc != -1) {\n            score_threshold = Math.min(match_bitapScore_(0, best_loc), score_threshold);\n        }\n    }\n\n    // Initialise the bit arrays.\n    var matchmask = 1 << (pattern.length - 1);\n    best_loc = -1;\n\n    var bin_min, bin_mid;\n    var bin_max = pattern.length + text.length;\n    var last_rd;\n    for (var d = 0; d < pattern.length; d++) {\n        // Scan for the best match; each iteration allows for one more error.\n        // Run a binary search to determine how far from 'loc' we can stray at this\n        // error level.\n        bin_min = 0;\n        bin_mid = bin_max;\n        while (bin_min < bin_mid) {\n            if (match_bitapScore_(d, loc + bin_mid) <= score_threshold) {\n                bin_min = bin_mid;\n            } else {\n                bin_max = bin_mid;\n            }\n            bin_mid = Math.floor((bin_max - bin_min) / 2 + bin_min);\n        }\n        // Use the result from this iteration as the maximum for the next.\n        bin_max = bin_mid;\n        var start = Math.max(1, loc - bin_mid + 1);\n        var finish = Math.min(loc + bin_mid, text.length) + pattern.length;\n\n        var rd = Array(finish + 2);\n        rd[finish + 1] = (1 << d) - 1;\n        for (var j = finish; j >= start; j--) {\n            // The alphabet (s) is a sparse hash, so the following line generates\n            // warnings.\n            var charMatch = s[text.charAt(j - 1)];\n            if (d === 0) {    // First pass: exact match.\n                rd[j] = ((rd[j + 1] << 1) | 1) & charMatch;\n            } else {    // Subsequent passes: fuzzy match.\n                rd[j] = (((rd[j + 1] << 1) | 1) & charMatch) |\n                                (((last_rd[j + 1] | last_rd[j]) << 1) | 1) |\n                                last_rd[j + 1];\n            }\n            if (rd[j] & matchmask) {\n                var score = match_bitapScore_(d, j - 1);\n                // This match will almost certainly be better than any existing match.\n                // But check anyway.\n                if (score <= score_threshold) {\n                    // Told you so.\n                    score_threshold = score;\n                    best_loc = j - 1;\n                    if (best_loc > loc) {\n                        // When passing loc, don't exceed our current distance from loc.\n                        start = Math.max(1, 2 * loc - best_loc);\n                    } else {\n                        // Already passed loc, downhill from here on in.\n                        break;\n                    }\n                }\n            }\n        }\n        // No hope for a (better) match at greater error levels.\n        if (match_bitapScore_(d + 1, loc) > score_threshold) {\n            break;\n        }\n        last_rd = rd;\n    }\n\n    return (best_loc < 0) ? false : true;\n};\n","\nvar classes = require('./utils/classes'),\n  events = require('./utils/events'),\n  extend = require('./utils/extend'),\n  toString = require('./utils/to-string'),\n  getByClass = require('./utils/get-by-class'),\n  fuzzy = require('./utils/fuzzy');\n\nmodule.exports = function(list, options) {\n  options = options || {};\n\n  options = extend({\n    location: 0,\n    distance: 100,\n    threshold: 0.4,\n    multiSearch: true,\n    searchClass: 'fuzzy-search'\n  }, options);\n\n\n\n  var fuzzySearch = {\n    search: function(searchString, columns) {\n      // Substract arguments from the searchString or put searchString as only argument\n      var searchArguments = options.multiSearch ? searchString.replace(/ +$/, '').split(/ +/) : [searchString];\n\n      for (var k = 0, kl = list.items.length; k < kl; k++) {\n        fuzzySearch.item(list.items[k], columns, searchArguments);\n      }\n    },\n    item: function(item, columns, searchArguments) {\n      var found = true;\n      for(var i = 0; i < searchArguments.length; i++) {\n        var foundArgument = false;\n        for (var j = 0, jl = columns.length; j < jl; j++) {\n          if (fuzzySearch.values(item.values(), columns[j], searchArguments[i])) {\n            foundArgument = true;\n          }\n        }\n        if(!foundArgument) {\n          found = false;\n        }\n      }\n      item.found = found;\n    },\n    values: function(values, value, searchArgument) {\n      if (values.hasOwnProperty(value)) {\n        var text = toString(values[value]).toLowerCase();\n\n        if (fuzzy(text, searchArgument, options)) {\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n\n\n  events.bind(getByClass(list.listContainer, options.searchClass), 'keyup', function(e) {\n    var target = e.target || e.srcElement; // IE have srcElement\n    list.search(target.value, fuzzySearch.search);\n  });\n\n  return function(str, columns) {\n    list.search(str, columns, fuzzySearch.search);\n  };\n};\n","var naturalSort = require('string-natural-compare'),\n  getByClass = require('./utils/get-by-class'),\n  extend = require('./utils/extend'),\n  indexOf = require('./utils/index-of'),\n  events = require('./utils/events'),\n  toString = require('./utils/to-string'),\n  classes = require('./utils/classes'),\n  getAttribute = require('./utils/get-attribute'),\n  toArray = require('./utils/to-array');\n\nmodule.exports = function(id, options, values) {\n\n  var self = this,\n    init,\n    Item = require('./item')(self),\n    addAsync = require('./add-async')(self),\n    initPagination = require('./pagination')(self);\n\n  init = {\n    start: function() {\n      self.listClass      = \"list\";\n      self.searchClass    = \"search\";\n      self.sortClass      = \"sort\";\n      self.page           = 10000;\n      self.i              = 1;\n      self.items          = [];\n      self.visibleItems   = [];\n      self.matchingItems  = [];\n      self.searched       = false;\n      self.filtered       = false;\n      self.searchColumns  = undefined;\n      self.handlers       = { 'updated': [] };\n      self.valueNames     = [];\n      self.utils          = {\n        getByClass: getByClass,\n        extend: extend,\n        indexOf: indexOf,\n        events: events,\n        toString: toString,\n        naturalSort: naturalSort,\n        classes: classes,\n        getAttribute: getAttribute,\n        toArray: toArray\n      };\n\n      self.utils.extend(self, options);\n\n      self.listContainer = (typeof(id) === 'string') ? document.getElementById(id) : id;\n      if (!self.listContainer) { return; }\n      self.list       = getByClass(self.listContainer, self.listClass, true);\n\n      self.parse        = require('./parse')(self);\n      self.templater    = require('./templater')(self);\n      self.search       = require('./search')(self);\n      self.filter       = require('./filter')(self);\n      self.sort         = require('./sort')(self);\n      self.fuzzySearch  = require('./fuzzy-search')(self, options.fuzzySearch);\n\n      this.handlers();\n      this.items();\n      this.pagination();\n\n      self.update();\n    },\n    handlers: function() {\n      for (var handler in self.handlers) {\n        if (self[handler]) {\n          self.on(handler, self[handler]);\n        }\n      }\n    },\n    items: function() {\n      self.parse(self.list);\n      if (values !== undefined) {\n        self.add(values);\n      }\n    },\n    pagination: function() {\n      if (options.pagination !== undefined) {\n        if (options.pagination === true) {\n          options.pagination = [{}];\n        }\n        if (options.pagination[0] === undefined){\n          options.pagination = [options.pagination];\n        }\n        for (var i = 0, il = options.pagination.length; i < il; i++) {\n          initPagination(options.pagination[i]);\n        }\n      }\n    }\n  };\n\n  /*\n  * Re-parse the List, use if html have changed\n  */\n  this.reIndex = function() {\n    self.items          = [];\n    self.visibleItems   = [];\n    self.matchingItems  = [];\n    self.searched       = false;\n    self.filtered       = false;\n    self.parse(self.list);\n  };\n\n  this.toJSON = function() {\n    var json = [];\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      json.push(self.items[i].values());\n    }\n    return json;\n  };\n\n\n  /*\n  * Add object to list\n  */\n  this.add = function(values, callback) {\n    if (values.length === 0) {\n      return;\n    }\n    if (callback) {\n      addAsync(values, callback);\n      return;\n    }\n    var added = [],\n      notCreate = false;\n    if (values[0] === undefined){\n      values = [values];\n    }\n    for (var i = 0, il = values.length; i < il; i++) {\n      var item = null;\n      notCreate = (self.items.length > self.page) ? true : false;\n      item = new Item(values[i], undefined, notCreate);\n      self.items.push(item);\n      added.push(item);\n    }\n    self.update();\n    return added;\n  };\n\n\tthis.show = function(i, page) {\n\t\tthis.i = i;\n\t\tthis.page = page;\n\t\tself.update();\n    return self;\n\t};\n\n  /* Removes object from list.\n  * Loops through the list and removes objects where\n  * property \"valuename\" === value\n  */\n  this.remove = function(valueName, value, options) {\n    var found = 0;\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      if (self.items[i].values()[valueName] == value) {\n        self.templater.remove(self.items[i], options);\n        self.items.splice(i,1);\n        il--;\n        i--;\n        found++;\n      }\n    }\n    self.update();\n    return found;\n  };\n\n  /* Gets the objects in the list which\n  * property \"valueName\" === value\n  */\n  this.get = function(valueName, value) {\n    var matchedItems = [];\n    for (var i = 0, il = self.items.length; i < il; i++) {\n      var item = self.items[i];\n      if (item.values()[valueName] == value) {\n        matchedItems.push(item);\n      }\n    }\n    return matchedItems;\n  };\n\n  /*\n  * Get size of the list\n  */\n  this.size = function() {\n    return self.items.length;\n  };\n\n  /*\n  * Removes all items from the list\n  */\n  this.clear = function() {\n    self.templater.clear();\n    self.items = [];\n    return self;\n  };\n\n  this.on = function(event, callback) {\n    self.handlers[event].push(callback);\n    return self;\n  };\n\n  this.off = function(event, callback) {\n    var e = self.handlers[event];\n    var index = indexOf(e, callback);\n    if (index > -1) {\n      e.splice(index, 1);\n    }\n    return self;\n  };\n\n  this.trigger = function(event) {\n    var i = self.handlers[event].length;\n    while(i--) {\n      self.handlers[event][i](self);\n    }\n    return self;\n  };\n\n  this.reset = {\n    filter: function() {\n      var is = self.items,\n        il = is.length;\n      while (il--) {\n        is[il].filtered = false;\n      }\n      return self;\n    },\n    search: function() {\n      var is = self.items,\n        il = is.length;\n      while (il--) {\n        is[il].found = false;\n      }\n      return self;\n    }\n  };\n\n  this.update = function() {\n    var is = self.items,\n\t\t\til = is.length;\n\n    self.visibleItems = [];\n    self.matchingItems = [];\n    self.templater.clear();\n    for (var i = 0; i < il; i++) {\n      if (is[i].matching() && ((self.matchingItems.length+1) >= self.i && self.visibleItems.length < self.page)) {\n        is[i].show();\n        self.visibleItems.push(is[i]);\n        self.matchingItems.push(is[i]);\n      } else if (is[i].matching()) {\n        self.matchingItems.push(is[i]);\n        is[i].hide();\n      } else {\n        is[i].hide();\n      }\n    }\n    self.trigger('updated');\n    return self;\n  };\n\n  init.start();\n};\n","/*!\n * classie v1.0.1\n * class helper functions\n * from bonzo https://github.com/ded/bonzo\n * MIT license\n * \n * classie.has( elem, 'my-class' ) -> true/false\n * classie.add( elem, 'my-new-class' )\n * classie.remove( elem, 'my-unwanted-class' )\n * classie.toggle( elem, 'my-class' )\n */\n\n/*jshint browser: true, strict: true, undef: true, unused: true */\n/*global define: false, module: false */\n\n( function( window ) {\n\n'use strict';\n\n// class helper functions from bonzo https://github.com/ded/bonzo\n\nfunction classReg( className ) {\n  return new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\");\n}\n\n// classList support for class management\n// altho to be fair, the api sucks because it won't accept multiple classes at once\nvar hasClass, addClass, removeClass;\n\nif ( 'classList' in document.documentElement ) {\n  hasClass = function( elem, c ) {\n    return elem.classList.contains( c );\n  };\n  addClass = function( elem, c ) {\n    elem.classList.add( c );\n  };\n  removeClass = function( elem, c ) {\n    elem.classList.remove( c );\n  };\n}\nelse {\n  hasClass = function( elem, c ) {\n    return classReg( c ).test( elem.className );\n  };\n  addClass = function( elem, c ) {\n    if ( !hasClass( elem, c ) ) {\n      elem.className = elem.className + ' ' + c;\n    }\n  };\n  removeClass = function( elem, c ) {\n    elem.className = elem.className.replace( classReg( c ), ' ' );\n  };\n}\n\nfunction toggleClass( elem, c ) {\n  var fn = hasClass( elem, c ) ? removeClass : addClass;\n  fn( elem, c );\n}\n\nvar classie = {\n  // full names\n  hasClass: hasClass,\n  addClass: addClass,\n  removeClass: removeClass,\n  toggleClass: toggleClass,\n  // short names\n  has: hasClass,\n  add: addClass,\n  remove: removeClass,\n  toggle: toggleClass\n};\n\n// transport\nif ( typeof define === 'function' && define.amd ) {\n  // AMD\n  define( classie );\n} else if ( typeof exports === 'object' ) {\n  // CommonJS\n  module.exports = classie;\n} else {\n  // browser global\n  window.classie = classie;\n}\n\n})( window );\n","window.List = require('list.js')\nwindow.classie = require('desandro-classie/classie.js')\n\n;(function(window) {\n\n\t'use strict';\n\n\t// helper functions\n\t// from https://davidwalsh.name/vendor-prefix\n\tvar prefix = (function () {\n\t\tvar styles = window.getComputedStyle(document.documentElement, ''),\n\t\t\tpre = (Array.prototype.slice.call(styles).join('').match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o']))[1],\n\t\t\tdom = ('WebKit|Moz|MS|O').match(new RegExp('(' + pre + ')', 'i'))[1];\n\t\t\n\t\treturn {\n\t\t\tdom: dom,\n\t\t\tlowercase: pre,\n\t\t\tcss: '-' + pre + '-',\n\t\t\tjs: pre[0].toUpperCase() + pre.substr(1)\n\t\t};\n\t})();\n\t\n\t// vars & stuff\n\tvar support = {transitions : Modernizr.csstransitions},\n\t\ttransEndEventNames = {'WebkitTransition': 'webkitTransitionEnd', 'MozTransition': 'transitionend', 'OTransition': 'oTransitionEnd', 'msTransition': 'MSTransitionEnd', 'transition': 'transitionend'},\n\t\ttransEndEventName = transEndEventNames[Modernizr.prefixed('transition')],\n\t\tonEndTransition = function(el, callback, propTest) {\n\t\t\tvar onEndCallbackFn = function( ev ) {\n\t\t\t\tif( support.transitions ) {\n\t\t\t\t\tif( ev.target != this || propTest && ev.propertyName !== propTest && ev.propertyName !== prefix.css + propTest ) return;\n\t\t\t\t\tthis.removeEventListener( transEndEventName, onEndCallbackFn );\n\t\t\t\t}\n\t\t\t\tif( callback && typeof callback === 'function' ) { callback.call(this); }\n\t\t\t};\n\t\t\tif( support.transitions ) {\n\t\t\t\tel.addEventListener( transEndEventName, onEndCallbackFn );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tonEndCallbackFn();\n\t\t\t}\n\t\t},\n\t\t// the mall element\n\t\tmall = document.querySelector('.mall'),\n\t\t// mall´s levels wrapper\n\t\tmallLevelsEl = mall.querySelector('.levels'),\n\t\t// mall´s levels\n\t\tmallLevels = [].slice.call(mallLevelsEl.querySelectorAll('.level')),\n\t\t// total levels\n\t\tmallLevelsTotal = mallLevels.length,\n\t\t// surroundings elems\n\t\tmallSurroundings = [].slice.call(mall.querySelectorAll('.surroundings')),\n\t\t// selected level position\n\t\tselectedLevel,\n\t\t// navigation element wrapper\n\t\tmallNav = document.querySelector('.mallnav'),\n\t\t// show all mall´s levels ctrl\n\t\tallLevelsCtrl = mallNav.querySelector('.mallnav__button--all-levels'),\n\t\t// levels navigation up/down ctrls\n\t\tlevelUpCtrl = mallNav.querySelector('.mallnav__button--up'),\n\t\tlevelDownCtrl = mallNav.querySelector('.mallnav__button--down'),\n\t\t// pins\n\t\tpins = [].slice.call(mallLevelsEl.querySelectorAll('.pin')),\n\t\t// content element\n\t\tcontentEl = document.querySelector('.content'),\n\t\t// content close ctrl\n\t\tcontentCloseCtrl = contentEl.querySelector('button.content__button'),\n\t\t// check if a content item is opened\n\t\tisOpenContentArea,\n\t\t// check if currently animating/navigating\n\t\tisNavigating,\n\t\t// check if all levels are shown or if one level is shown (expanded)\n\t\tisExpanded,\n\t\t// spaces list element\n\t\tspacesListEl = document.getElementById('spaces-list'),\n\t\t// spaces list ul\n\t\tspacesEl = spacesListEl.querySelector('ul.list'),\n\t\t// all the spaces listed\n\t\tspaces = [].slice.call(spacesEl.querySelectorAll('.list__item > a.list__link')),\n\t\t// reference to the current shows space (name set in the data-name attr of both the listed spaces and the pins on the map)\n\t\tspaceref,\n\t\t// sort by ctrls\n\t\tsortByNameCtrl = document.querySelector('#sort-by-name'),\n\t\t// listjs initiliazation (all mall´s spaces)\n\t\tspacesList = new List('spaces-list', { valueNames: ['list__link', { data: ['level'] }, { data: ['category'] } ] }),\n\t\t// search\n\t\tsearchBox = document.querySelector('.search__input'),\n\t\t// smaller screens:\n\t\t// open search ctrl\n\t\topenSearchCtrl = document.querySelector('button.open-search'),\n\t\t// close search ctrl\n\t\tcloseSearchCtrl = document.querySelector('button.close-search');\n\n\tfunction init() {\n\t\t// init/bind events\n\t\tinitEvents();\n\t}\n\n\t/**\n\t * Initialize/Bind events fn.\n\t */\n\tfunction initEvents() {\n\t\t// click on a Mall´s level\n\t\tmallLevels.forEach(function(level, pos) {\n\t\t\tlevel.addEventListener('click', function() {\n\t\t\t\t// shows this level\n\t\t\t\tshowLevel(pos+1);\n\t\t\t});\n\t\t});\n\n\t\t// click on the show mall´s levels ctrl\n\t\tallLevelsCtrl.addEventListener('click', function() {\n\t\t\t// shows all levels\n\t\t\tshowAllLevels();\n\t\t});\n\n\t\t// navigating through the levels\n\t\tlevelUpCtrl.addEventListener('click', function() { navigate('Down'); });\n\t\tlevelDownCtrl.addEventListener('click', function() { navigate('Up'); });\n\n\t\t// sort by name ctrl - add/remove category name (css pseudo element) from list and sorts the spaces by name \n\t\tsortByNameCtrl.addEventListener('click', function() {\n\t\t\tvar label = this.querySelector('label');\n\t\t\tvar checkbox = this.querySelector('input');\n\t\t\tcheckbox.checked = !checkbox.checked;\n\t\t\tif( checkbox.checked ) {\n\t\t\t\tclassie.remove(spacesEl, 'grouped-by-category');\n\t\t\t\tspacesList.sort('list__link');\n\t\t\t\tclassie.add(label, 'active');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tclassie.add(spacesEl, 'grouped-by-category'); \n\t\t\t\tspacesList.sort('category');\n\t\t\t\tclassie.remove(label, 'active');\n\t\t\t}\n\t\t});\n\n\t\t// hovering a pin / clicking a pin\n\t\tpins.forEach(function(pin) {\n\t\t\tvar contentItem = contentEl.querySelector('.content__item[data-space=\"' + pin.getAttribute('data-space') + '\"]');\n\n\t\t\tpin.addEventListener('mouseenter', function() {\n\t\t\t\tif( !isOpenContentArea ) {\n\t\t\t\t\tclassie.add(contentItem, 'content__item--hover');\n\t\t\t\t}\n\t\t\t});\n\t\t\tpin.addEventListener('mouseleave', function() {\n\t\t\t\tif( !isOpenContentArea ) {\n\t\t\t\t\tclassie.remove(contentItem, 'content__item--hover');\n\t\t\t\t}\n\t\t\t});\n\t\t\tpin.addEventListener('click', function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\t// open content for this pin\n\t\t\t\topenContent(pin.getAttribute('data-space'));\n\t\t\t\t// remove hover class (showing the title)\n\t\t\t\tclassie.remove(contentItem, 'content__item--hover');\n\t\t\t});\n\t\t});\n\n\t\t// closing the content area\n\t\tcontentCloseCtrl.addEventListener('click', function() {\n\t\t\tcloseContentArea();\n\t\t});\n\n\t\t// clicking on a listed space: open level - shows space\n\t\tspaces.forEach(function(space) {\n\t\t\tvar spaceItem = space.parentNode,\n\t\t\t\tlevel = spaceItem.getAttribute('data-level'),\n\t\t\t\tspacerefval = spaceItem.getAttribute('data-space');\n\n\t\t\tspace.addEventListener('click', function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\t// for smaller screens: close search bar\n\t\t\t\tcloseSearch();\n\t\t\t\t// open level\n\t\t\t\tshowLevel(level);\n\t\t\t\t// open content for this space\n\t\t\t\topenContent(spacerefval);\n\t\t\t});\n\t\t});\n\n\t\tsearchBox.addEventListener('keyup', doSearch);\n\t\tsearchBox.addEventListener('search', doSearch);\n\n\t\t// smaller screens: open the search bar\n\t\topenSearchCtrl.addEventListener('click', function() {\n\t\t\topenSearch();\n\t\t});\n\n\t\t// smaller screens: close the search bar\n\t\tcloseSearchCtrl.addEventListener('click', function() {\n\t\t\tcloseSearch();\n\t\t});\n\t}\n\n\tfunction doSearch() {\n\t\tspacesList.search(searchBox.value);\n\t}\n\n\t/**\n\t * Opens a level. The current level moves to the center while the other ones move away.\n\t */\n\tfunction showLevel(level) {\n\t\tif( isExpanded ) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\t// update selected level val\n\t\tselectedLevel = level;\n\n\t\t// control navigation controls state\n\t\tsetNavigationState();\n\n\t\tclassie.add(mallLevelsEl, 'levels--selected-' + selectedLevel);\n\t\t\n\t\t// the level element\n\t\tvar levelEl = mallLevels[selectedLevel - 1];\n\t\tclassie.add(levelEl, 'level--current');\n\n\t\tonEndTransition(levelEl, function() {\n\t\t\tclassie.add(mallLevelsEl, 'levels--open');\n\n\t\t\t// show level pins\n\t\t\tshowPins();\n\n\t\t\tisExpanded = true;\n\t\t}, 'transform');\n\t\t\n\t\t// hide surroundings element\n\t\thideSurroundings();\n\t\t\n\t\t// show mall nav ctrls\n\t\tshowMallNav();\n\n\t\t// filter the spaces for this level\n\t\tshowLevelSpaces();\n\t}\n\n\t/**\n\t * Shows all Mall´s levels\n\t */\n\tfunction showAllLevels() {\n\t\tif( isNavigating || !isExpanded ) {\n\t\t\treturn false;\n\t\t}\n\t\tisExpanded = false;\n\n\t\tclassie.remove(mallLevels[selectedLevel - 1], 'level--current');\n\t\tclassie.remove(mallLevelsEl, 'levels--selected-' + selectedLevel);\n\t\tclassie.remove(mallLevelsEl, 'levels--open');\n\n\t\t// hide level pins\n\t\tremovePins();\n\n\t\t// shows surrounding element\n\t\tshowSurroundings();\n\t\t\n\t\t// hide mall nav ctrls\n\t\thideMallNav();\n\n\t\t// show back the complete list of spaces\n\t\tspacesList.filter();\n\n\t\t// close content area if it is open\n\t\tif( isOpenContentArea ) {\n\t\t\tcloseContentArea();\n\t\t}\n\t}\n\n\t/**\n\t * Shows all spaces for current level\n\t */\n\tfunction showLevelSpaces() {\n\t\tspacesList.filter(function(item) { \n\t\t\treturn item.values().level === selectedLevel.toString(); \n\t\t});\n\t}\n\n\t/**\n\t * Shows the level´s pins\n\t */\n\tfunction showPins(levelEl) {\n\t\tvar levelEl = levelEl || mallLevels[selectedLevel - 1];\n\t\tclassie.add(levelEl.querySelector('.level__pins'), 'level__pins--active');\n\t}\n\n\t/**\n\t * Removes the level´s pins\n\t */\n\tfunction removePins(levelEl) {\n\t\tvar levelEl = levelEl || mallLevels[selectedLevel - 1];\n\t\tclassie.remove(levelEl.querySelector('.level__pins'), 'level__pins--active');\n\t}\n\n\t/**\n\t * Show the navigation ctrls\n\t */\n\tfunction showMallNav() {\n\t\tclassie.remove(mallNav, 'mallnav--hidden');\n\t}\n\n\t/**\n\t * Hide the navigation ctrls\n\t */\n\tfunction hideMallNav() {\n\t\tclassie.add(mallNav, 'mallnav--hidden');\n\t}\n\n\t/**\n\t * Show the surroundings level\n\t */\n\tfunction showSurroundings() {\n\t\tmallSurroundings.forEach(function(el) {\n\t\t\tclassie.remove(el, 'surroundings--hidden');\n\t\t});\n\t}\n\n\t/**\n\t * Hide the surroundings level\n\t */\n\tfunction hideSurroundings() {\n\t\tmallSurroundings.forEach(function(el) {\n\t\t\tclassie.add(el, 'surroundings--hidden');\n\t\t});\n\t}\n\n\t/**\n\t * Navigate through the mall´s levels\n\t */\n\tfunction navigate(direction) {\n\t\tif( isNavigating || !isExpanded || isOpenContentArea ) {\n\t\t\treturn false;\n\t\t}\n\t\tisNavigating = true;\n\n\t\tvar prevSelectedLevel = selectedLevel;\n\n\t\t// current level\n\t\tvar currentLevel = mallLevels[prevSelectedLevel-1];\n\n\t\tif( direction === 'Up' && prevSelectedLevel > 1 ) {\n\t\t\t--selectedLevel;\n\t\t}\n\t\telse if( direction === 'Down' && prevSelectedLevel < mallLevelsTotal ) {\n\t\t\t++selectedLevel;\n\t\t}\n\t\telse {\n\t\t\tisNavigating = false;\t\n\t\t\treturn false;\n\t\t}\n\n\t\t// control navigation controls state (enabled/disabled)\n\t\tsetNavigationState();\n\t\t// transition direction class\n\t\tclassie.add(currentLevel, 'level--moveOut' + direction);\n\t\t// next level element\n\t\tvar nextLevel = mallLevels[selectedLevel-1]\n\t\t// ..becomes the current one\n\t\tclassie.add(nextLevel, 'level--current');\n\n\t\t// when the transition ends..\n\t\tonEndTransition(currentLevel, function() {\n\t\t\tclassie.remove(currentLevel, 'level--moveOut' + direction);\n\t\t\t// solves rendering bug for the SVG opacity-fill property\n\t\t\tsetTimeout(function() {classie.remove(currentLevel, 'level--current');}, 60);\n\n\t\t\tclassie.remove(mallLevelsEl, 'levels--selected-' + prevSelectedLevel);\n\t\t\tclassie.add(mallLevelsEl, 'levels--selected-' + selectedLevel);\n\n\t\t\t// show the current level´s pins\n\t\t\tshowPins();\n\n\t\t\tisNavigating = false;\n\t\t});\n\n\t\t// filter the spaces for this level\n\t\tshowLevelSpaces();\n\n\t\t// hide the previous level´s pins\n\t\tremovePins(currentLevel);\n\t}\n\n\t/**\n\t * Control navigation ctrls state. Add disable class to the respective ctrl when the current level is either the first or the last.\n\t */\n\tfunction setNavigationState() {\n\t\tif( selectedLevel == 1 ) {\n\t\t\tclassie.add(levelDownCtrl, 'boxbutton--disabled');\n\t\t}\n\t\telse {\n\t\t\tclassie.remove(levelDownCtrl, 'boxbutton--disabled');\n\t\t}\n\n\t\tif( selectedLevel == mallLevelsTotal ) {\n\t\t\tclassie.add(levelUpCtrl, 'boxbutton--disabled');\n\t\t}\n\t\telse {\n\t\t\tclassie.remove(levelUpCtrl, 'boxbutton--disabled');\n\t\t}\n\t}\n\n\t/**\n\t * Opens/Reveals a content item.\n\t */\n\tfunction openContent(spacerefval) {\n\t\t// if one already shown:\n\t\tif( isOpenContentArea ) {\n\t\t\thideSpace();\n\t\t\tspaceref = spacerefval;\n\t\t\tshowSpace();\n\t\t}\n\t\telse {\n\t\t\tspaceref = spacerefval;\n\t\t\topenContentArea();\n\t\t}\n\t\t\n\t\t// remove class active (if any) from current list item\n\t\tvar activeItem = spacesEl.querySelector('li.list__item--active');\n\t\tif( activeItem ) {\n\t\t\tclassie.remove(activeItem, 'list__item--active');\n\t\t}\n\t\t// list item gets class active (if the list item is currently shown in the list)\n\t\tvar listItem = spacesEl.querySelector('li[data-space=\"' + spacerefval + '\"]')\n\t\tif( listItem ) {\n\t\t\tclassie.add(listItem, 'list__item--active');\n\t\t}\n\n\t\t// remove class selected (if any) from current space\n\t\tvar activeSpaceArea = mallLevels[selectedLevel - 1].querySelector('svg > .map__space--selected');\n\t\tif( activeSpaceArea ) {\n\t\t\tclassie.remove(activeSpaceArea, 'map__space--selected');\n\t\t}\n\t\t// svg area gets selected\n\t\tclassie.add(mallLevels[selectedLevel - 1].querySelector('svg > .map__space[data-space=\"' + spaceref + '\"]'), 'map__space--selected');\n\t}\n\n\t/**\n\t * Opens the content area.\n\t */\n\tfunction openContentArea() {\n\t\tisOpenContentArea = true;\n\t\t// shows space\n\t\tshowSpace(true);\n\t\t// show close ctrl\n\t\tclassie.remove(contentCloseCtrl, 'content__button--hidden');\n\t\t// resize mall area\n\t\tclassie.add(mall, 'mall--content-open');\n\t\t// disable mall nav ctrls\n\t\tclassie.add(levelDownCtrl, 'boxbutton--disabled');\n\t\tclassie.add(levelUpCtrl, 'boxbutton--disabled');\n\t}\n\n\t/**\n\t * Shows a space.\n\t */\n\tfunction showSpace(sliding) {\n\t\t// the content item\n\t\tvar contentItem = contentEl.querySelector('.content__item[data-space=\"' + spaceref + '\"]');\n\t\t// show content\n\t\tclassie.add(contentItem, 'content__item--current');\n\t\tif( sliding ) {\n\t\t\tonEndTransition(contentItem, function() {\n\t\t\t\tclassie.add(contentEl, 'content--open');\n\t\t\t});\n\t\t}\n\t\t// map pin gets selected\n\t\tclassie.add(mallLevelsEl.querySelector('.pin[data-space=\"' + spaceref + '\"]'), 'pin--active');\n\t}\n\n\t/**\n\t * Closes the content area.\n\t */\n\tfunction closeContentArea() {\n\t\tclassie.remove(contentEl, 'content--open');\n\t\t// close current space\n\t\thideSpace();\n\t\t// hide close ctrl\n\t\tclassie.add(contentCloseCtrl, 'content__button--hidden');\n\t\t// resize mall area\n\t\tclassie.remove(mall, 'mall--content-open');\n\t\t// enable mall nav ctrls\n\t\tif( isExpanded ) {\n\t\t\tsetNavigationState();\n\t\t}\n\t\tisOpenContentArea = false;\n\t}\n\n\t/**\n\t * Hides a space.\n\t */\n\tfunction hideSpace() {\n\t\t// the content item\n\t\tvar contentItem = contentEl.querySelector('.content__item[data-space=\"' + spaceref + '\"]');\n\t\t// hide content\n\t\tclassie.remove(contentItem, 'content__item--current');\n\t\t// map pin gets unselected\n\t\tclassie.remove(mallLevelsEl.querySelector('.pin[data-space=\"' + spaceref + '\"]'), 'pin--active');\n\t\t// remove class active (if any) from current list item\n\t\tvar activeItem = spacesEl.querySelector('li.list__item--active');\n\t\tif( activeItem ) {\n\t\t\tclassie.remove(activeItem, 'list__item--active');\n\t\t}\n\t\t// remove class selected (if any) from current space\n\t\tvar activeSpaceArea = mallLevels[selectedLevel - 1].querySelector('svg > .map__space--selected');\n\t\tif( activeSpaceArea ) {\n\t\t\tclassie.remove(activeSpaceArea, 'map__space--selected');\n\t\t}\n\t}\n\n\t/**\n\t * for smaller screens: open search bar\n\t */\n\tfunction openSearch() {\n\t\t// shows all levels - we want to show all the spaces for smaller screens \n\t\tshowAllLevels();\n\n\t\tclassie.add(spacesListEl, 'spaces-list--open');\n\t}\n\n\t/**\n\t * for smaller screens: close search bar\n\t */\n\tfunction closeSearch() {\n\t\tclassie.remove(spacesListEl, 'spaces-list--open');\n\t}\n\t\n\tinit();\n\n})(window);"]}