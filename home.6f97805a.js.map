{"version":3,"sources":["js/home.js"],"names":["window","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getMousePos","e","posx","posy","event","pageX","pageY","clientX","clientY","document","body","scrollLeft","documentElement","scrollTop","x","y","DOM","loader","querySelector","scroller","rooms","slice","call","querySelectorAll","content","currentRoom","totalRooms","length","initTransform","translateX","translateY","translateZ","rotateX","rotateY","rotateZ","resetTransform","menuTransform","infoTransform","roomTransition","speed","easing","menuTransition","infoTransition","tilt","tiltRotation","onEndTransition","el","callback","onEndCallbackFn","ev","removeEventListener","addEventListener","win","width","innerWidth","height","innerHeight","isMoving","isNavigating","init","move","transition","transform","then","initTilt","applyRoomTransition","initEvents","removeTilt","opts","Promise","resolve","reject","stopTransition","applyRoomTransform","onEndFn","onMouseMoveFn","requestAnimationFrame","mousepos","rotX","rotY","debounceResizeFn","style","toggleSlide","dir","delay","slide","slides","name","title","date","undefined","anime","remove","animeOpts","targets","duration","t","i","c","opacity","value","begin","classList","add","complete"],"mappings":"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","file":"home.6f97805a.js","sourceRoot":"..","sourcesContent":["/**\n * main.js\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Copyright 2017, Codrops\n * http://www.codrops.com\n */\n;(function(window) {\n\n\t'use strict';\n\n\t// From https://davidwalsh.name/javascript-debounce-function.\n\tfunction debounce(func, wait, immediate) {\n\t\tvar timeout;\n\t\treturn function() {\n\t\t\tvar context = this, args = arguments;\n\t\t\tvar later = function() {\n\t\t\t\ttimeout = null;\n\t\t\t\tif (!immediate) func.apply(context, args);\n\t\t\t};\n\t\t\tvar callNow = immediate && !timeout;\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(later, wait);\n\t\t\tif (callNow) func.apply(context, args);\n\t\t};\n\t};\n\n\t// from http://www.quirksmode.org/js/events_properties.html#position\n\tfunction getMousePos(e) {\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\tif (!e) var e = window.event;\n\t\tif (e.pageX || e.pageY) \t{\n\t\t\tposx = e.pageX;\n\t\t\tposy = e.pageY;\n\t\t}\n\t\telse if (e.clientX || e.clientY) \t{\n\t\t\tposx = e.clientX + document.body.scrollLeft\n\t\t\t\t+ document.documentElement.scrollLeft;\n\t\t\tposy = e.clientY + document.body.scrollTop\n\t\t\t\t+ document.documentElement.scrollTop;\n\t\t}\n\t\treturn {\n\t\t\tx : posx,\n\t\t\ty : posy\n\t\t}\n\t}\n\n\tvar DOM = {};\n\t// The loader.\n\tDOM.loader = document.querySelector('.overlay--loader');\n\t// The room wrapper. This will be the element to be transformed in order to move around.\n\tDOM.scroller = document.querySelector('.room-container > .scroller');\n\t// The rooms.\n\tDOM.rooms = [].slice.call(DOM.scroller.querySelectorAll('.room'));\n\t// The content wrapper.\n\tDOM.content = document.querySelector('.content');\n\n\tvar\tcurrentRoom = 0,\n\t\t// Total number of rooms.\n\t\ttotalRooms = DOM.rooms.length,\n\t\t// Initial transform.\n\t\tinitTransform = { translateX : 0, translateY : 0, translateZ : '500px', rotateX : 0, rotateY : 0, rotateZ : 0 },\n\t\t// Reset transform.\n\t\tresetTransform = { translateX : 0, translateY : 0, translateZ : 0, rotateX : 0, rotateY : 0, rotateZ : 0 },\n\t\t// View from top.\n\t\tmenuTransform = { translateX : 0, translateY : '150%', translateZ : 0, rotateX : '15deg', rotateY : 0, rotateZ : 0 },\n\t\tmenuTransform = { translateX : 0, translateY : '50%', translateZ : 0, rotateX : '-10deg', rotateY : 0, rotateZ : 0 },\n\t\t// Info view transform.\n\t\tinfoTransform = { translateX : 0, translateY : 0, translateZ : '200px', rotateX : '2deg', rotateY : 0, rotateZ : '4deg' },\n\t\t// Room moving transition.\n\t\troomTransition = { speed: '0.4s', easing: 'ease' },\n\t\t// View from top transition.\n\t\tmenuTransition = { speed: '1.5s', easing: 'cubic-bezier(0.2,1,0.3,1)' },\n\t\t// Info transition.\n\t\tinfoTransition = { speed: '15s', easing: 'cubic-bezier(0.3,1,0.3,1)' },\n\t\ttilt = false,\n\t\t// How much to rotate when the mouse moves.\n\t\ttiltRotation = {\n\t\t\trotateX : 1, // a relative rotation of -1deg to 1deg on the x-axis\n\t\t\trotateY : -3  // a relative rotation of -3deg to 3deg on the y-axis\n\t\t},\n\t\t// Transition end event handler.\n\t\tonEndTransition = function(el, callback) {\n\t\t\tvar onEndCallbackFn = function(ev) {\n\t\t\t\tthis.removeEventListener('transitionend', onEndCallbackFn);\n\t\t\t\tif( callback && typeof callback === 'function' ) { callback.call(); }\n\t\t\t};\n\t\t\tel.addEventListener('transitionend', onEndCallbackFn);\n\t\t},\n\t\t// Window sizes.\n\t\twin = {width: window.innerWidth, height: window.innerHeight},\n\t\t// Check if moving inside the room and check if navigating.\n\t\tisMoving, isNavigating;\n\n\tfunction init() {\n\t\t// Move into the current room.\n\t\tmove({transition: roomTransition, transform: initTransform}).then(function() {\n\t\t\tinitTilt();\n\t\t\tapplyRoomTransition('none');\n\t\t});\n\t\t// Animate the current slide in.\n\t\t// showSlide();\n\t\t// Init/Bind events.\n\t\tinitEvents();\n\t}\n\n\tfunction initTilt() {\n\t\t//applyRoomTransition(tiltTransition);\n\t\ttilt = true;\n\t}\n\n\tfunction removeTilt() {\n\t\ttilt = false;\n\t}\n\t\n\tfunction move(opts) {\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tif( isMoving && !opts.stopTransition ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tisMoving = true;\n\n\t\t\tif( opts.transition ) {\n\t\t\t\tapplyRoomTransition(opts.transition);\n\t\t\t}\n\n\t\t\tif( opts.transform ) {\n\t\t\t\tapplyRoomTransform(opts.transform);\n\t\t\t\tvar onEndFn = function() {\n\t\t\t\t\tisMoving = false;\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\t\t\t\tonEndTransition(DOM.scroller, onEndFn);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\t\n\t\t});\n\t}\n\n\tfunction initEvents() {\n\t\t// Mousemove event / Tilt functionality.\n\t\tvar onMouseMoveFn = function(ev) {\n\t\t\t\trequestAnimationFrame(function() {\n\t\t\t\t\tif( !tilt ) return false;\n\n\t\t\t\t\tvar mousepos = getMousePos(ev),\n\t\t\t\t\t\t// transform values\n\t\t\t\t\t\trotX = tiltRotation.rotateX ? initTransform.rotateX -  (3 * tiltRotation.rotateX / win.height * mousepos.y - tiltRotation.rotateX) : 0,\n\t\t\t\t\t\trotY = tiltRotation.rotateY ? initTransform.rotateY -  (3 * tiltRotation.rotateY / win.width * mousepos.x - tiltRotation.rotateY) : 0;\n\t\t\t\n\t\t\t\t\t// apply transform\n\t\t\t\t\tapplyRoomTransform({\n\t\t\t\t\t\t'translateX' : initTransform.translateX, \n\t\t\t\t\t\t'translateY' : initTransform.translateY, \n\t\t\t\t\t\t'translateZ' : initTransform.translateZ, \n\t\t\t\t\t\t'rotateX' : rotX + 'deg', \n\t\t\t\t\t\t'rotateY' : rotY + 'deg',\n\t\t\t\t\t\t'rotateZ' : initTransform.rotateZ\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\t// Window resize.\n\t\t\tdebounceResizeFn = debounce(function() {\n\t\t\t\twin = {width: window.innerWidth, height: window.innerHeight};\n\t\t\t}, 10);\n\t\t\n\t\tdocument.addEventListener('mousemove', onMouseMoveFn);\n\t\twindow.addEventListener('resize', debounceResizeFn);\n\t}\n\n\tfunction applyRoomTransform(transform) {\n\t\tDOM.scroller.style.transform = 'translate3d(' + transform.translateX + ', ' + transform.translateY + ', ' + transform.translateZ + ') ' +\n\t\t\t\t\t\t\t\t\t   'rotate3d(1,0,0,' + transform.rotateX + ') rotate3d(0,1,0,' + transform.rotateY + ') rotate3d(0,0,1,' + transform.rotateZ + ')';\n\t}\n\n\tfunction applyRoomTransition(transition) {\n\t\tDOM.scroller.style.transition = transition === 'none' ? transition : 'transform ' + transition.speed + ' ' + transition.easing;\n\t}\n\n\tfunction toggleSlide(dir, delay) {\n\t\tvar slide = DOM.slides[currentRoom],\n\t\t\t// Slide's name.\n\t\t\tname = slide.querySelector('.slide__name'),\n\t\t\t// Slide's title and date elements.\n\t\t\ttitle = slide.querySelector('.slide__title'),\n\t\t\tdate = slide.querySelector('.slide__date');\n\n\t\tdelay = delay !== undefined ? delay : 0;\n\n\t\tanime.remove([name, title, date]);\n\t\tvar animeOpts = {\n\t\t\ttargets: [name, title, date],\n\t\t\tduration: dir === 'in' ? 400 : 400,\n\t\t\t//delay: 0,//dir === 'in' ? 150 : 0,\n\t\t\tdelay: function(t, i, c) {\n\t\t\t\treturn delay + 75+i*75;\n\t\t\t},\n\t\t\teasing: [0.25,0.1,0.25,1],\n\t\t\topacity: {\n\t\t\t\tvalue: dir === 'in' ? [0,1] : [1,0],\n\t\t\t\tduration: dir === 'in' ? 550 : 250\n\t\t\t},\n\t\t\ttranslateY: function(t, i) {\n\t\t\t\treturn dir === 'in' ? [150,0] : [0,-150];\n\t\t\t}\t\n\t\t};\n\t\tif( dir === 'in' ) {\n\t\t\tanimeOpts.begin = function() {\n\t\t\t\tslide.classList.add('slide--current');\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tanimeOpts.complete = function() {\n\t\t\t\tslide.classList.remove('slide--current');\n\t\t\t};\n\t\t}\n\t\tanime(animeOpts);\n\t}\n\n\tinit();\n\n})(window);"]}